# üîê Auth Service API

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ ASP.NET Core —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT, –≤–∫–ª—é—á–∞—é—â–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø–∞—Ä–æ–ª–∏ ‚Äî –≤ –≤–∏–¥–µ SHA-256 —Ö—ç—à–µ–π.

## üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **ASP.NET Core** Minimal API
- **Entity Framework Core** + SQL Server
- **JWT Bearer** Authentication
- **Swagger / OpenAPI**
- **SHA-256** hashing

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. [.NET 8 SDK](https://dotnet.microsoft.com/ru-ru/download/dotnet/8.0)
2. **Microsoft SQL Server** (–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

## üì° –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1Ô∏è‚É£ POST `/api/auth/register` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å.

#### üì• Request (JSON)

```json
{
  "email": "user@example.com",
  "password": "string"
}
```

#### üì§ Response `200 OK`

```json
{
  "message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω",
  "userId": "guid"
}
```

#### ‚ùå Response `400 Bad Request`

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```json
{
  "error": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
}
```

**–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email:**
```json
{
  "error": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email"
}
```

**–°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å:**
```json
{
  "error": "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
}
```

---

### 2Ô∏è‚É£ POST `/api/auth/login` ‚Äî –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT-—Ç–æ–∫–µ–Ω, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π **24 —á–∞—Å–∞**.

#### üì• Request (JSON)

```json
{
  "email": "user@example.com",
  "password": "string"
}
```

#### üì§ Response `200 OK`

```json
{
  "token": "jwt-token-string",
  "expiresAt": "2025-03-03T12:34:56Z"
}
```

#### ‚ùå Response `401 Unauthorized`

```json
{
  "status": 401
}
```

---

## üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```
Authorization: Bearer {token}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–í —Ñ–∞–π–ª–µ `appsettings.json` —É–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=AuthServiceDb;User Id=sa;Password=YourPassword;TrustServerCertificate=True"
  }
}
```

## üîå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ—Ä—Ç–∞–º

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º Docker Compose —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ—Ä—Ç—ã **—Å–≤–æ–±–æ–¥–Ω—ã**:

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|------------|
| SQL Server | **1433** | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö |
| API (HTTP) | **5000** | HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç |

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
dotnet run
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5000`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d
```
